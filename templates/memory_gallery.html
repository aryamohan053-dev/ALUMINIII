{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Alumni Memory Gallery</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { background-color: #f8f9fa; padding: 20px; }
        .memory-card { box-shadow: 0 4px 10px rgba(0,0,0,0.1); border-radius: 10px; overflow: hidden; }
        .memory-card img { width: 100%; height: 200px; object-fit: cover; }
        .memory-card .card-body { padding: 15px; }
        .memory-title { font-weight: 600; }
        .memory-desc { font-size: 14px; color: #555; }
        .back-btn {
            background-color: #0d6efd;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            text-decoration: none;
            display: inline-block;
        }
        .back-btn:hover {
            background-color: #084298;
            color: white;
        }
    </style>
</head>
<body>
<div class="container">

    <!-- Back Button -->
    <div class="mb-3">
        <!-- Redirect to dashboard -->
        <a href="{% url 'dashboard' %}" class="back-btn">‚Üê Back to Dashboard</a>
    </div>

    <h2 class="text-center mb-4">Alumni Memory Gallery</h2>

    <!-- Add Memory Form -->
    <div class="card mb-4 p-3">
        <h4>Add New Memory</h4>
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                {{ form.title.label_tag }}<br>
                {{ form.title }}
            </div>
            <div class="mb-3">
                {{ form.description.label_tag }}<br>
                {{ form.description }}
            </div>
            <div class="mb-3">
                {{ form.image.label_tag }}<br>
                {{ form.image }}
            </div>
            <button type="submit" class="btn btn-primary">Add Memory</button>
        </form>
    </div>

    <!-- Memory Gallery -->
    <div class="row g-4">
        {% for memory in memories %}
        <div class="col-md-4">
            <div class="memory-card">
                {% if memory.image %}
                <img src="{{ memory.image.url }}" alt="{{ memory.title }}">
                {% else %}
                <img src="{% static 'images/default.jpg' %}" alt="No image">
                {% endif %}
                <div class="card-body">
                    <div class="memory-title">{{ memory.title }}</div>
                    <div class="memory-desc">{{ memory.description|truncatechars:100 }}</div>
                    <div class="text-muted" style="font-size:12px;">
                        Posted by {{ memory.alumni.username }} on {{ memory.date_posted|date:"M d, Y" }}
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-center">No memories yet.</p>
        {% endfor %}
    </div>
</div>
</body>
</html>
