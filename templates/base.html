<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  {% load humanize %}
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Alumni Connect{% endblock %}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    /* core layout + variables */
    :root{--primary:#2c3e50;--secondary:#3498db;--success:#2ecc71;--accent:#e74c3c;--warning:#f39c12}
    body{font-family:Segoe UI, Tahoma, Verdana, sans-serif;background:#f8f9fa;color:#333}
    .sidebar{background:linear-gradient(180deg,var(--primary),#1a2530);color:#fff;height:100vh;position:fixed;padding-top:20px;width:250px;overflow:auto}
    .main-content{margin-left:250px;padding:20px}
    .header,.stats-card,.dashboard-section{background:#fff;border-radius:12px;padding:18px;box-shadow:0 4px 20px rgba(0,0,0,.06);margin-bottom:20px}
    .user-avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid var(--secondary)}
    .progress{height:12px;border-radius:10px;background:#e9ecef}
    .progress-bar{background:linear-gradient(90deg,var(--success),#27ae60)}
    @media (max-width:768px){.sidebar{position:relative;width:100%;height:auto}.main-content{margin-left:0}}
  </style>

  {% block extra_css %}{% endblock %}
</head>
<body>
  <div class="container-fluid p-0">
    <div class="row g-0">
      <aside class="sidebar col-auto">
        {% block sidebar %}
          <div class="px-3">
            <h4 class="mb-1"><i class="fas fa-graduation-cap me-2"></i>Alumni Connect</h4>
            <small class="text-white-50">Stay Connected, Grow Together</small>
          </div>
          <ul class="nav flex-column mt-3">
            <li class="nav-item"><a class="nav-link text-white" href="{% url 'dashboard' %}"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="{% url 'profile' %}"><i class="fas fa-user-circle me-2"></i>Profile</a></li>
            <li class="nav-item"><a class="nav-link text-white" href="{% url 'memory_gallery' %}"><i class="fas fa-images me-2"></i>Memory Gallery</a></li>
            <li class="nav-item mt-3"><a class="nav-link text-white" href="{% url 'logout' %}"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
          </ul>
        {% endblock %}
      </aside>

      <main class="main-content col">
        <header class="header">
          {% block header %}
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <h2 class="mb-0">Welcome, {{ user.first_name|default:user.username }}</h2>
                {% if student_profile %}<small class="text-muted">{{ student_profile.department }}{% if student_profile.roll_number %} â€¢ Roll: {{ student_profile.roll_number }}{% endif %}</small>{% endif %}
              </div>
              <div class="d-flex align-items-center">
                <div class="me-3 position-relative"><i class="fas fa-bell"></i><span class="badge bg-danger rounded-circle position-absolute" style="top:-6px;right:-6px;font-size:.65rem">3</span></div>
                <div>
                  {% if student_profile and student_profile.profile_photo %}
                    <img src="{{ student_profile.profile_photo.url }}" class="user-avatar">
                  {% else %}
                    <i class="fas fa-user-circle fa-2x text-muted"></i>
                  {% endif %}
                </div>
              </div>
            </div>
          {% endblock %}
        </header>

        <section>{% block stats %}{% endblock %}</section>

        <section class="row mt-3">
          <div class="col-lg-6">{% block left_column %}{% endblock %}</div>
          <div class="col-lg-6">{% block right_column %}{% endblock %}</div>
        </section>
      </main>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  {% block extra_js %}{% endblock %}
</body>
</html>