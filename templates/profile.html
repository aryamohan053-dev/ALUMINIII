
{% extends "base.html" %}
{% load static %}
{% block title %}My Profile — {{ user.get_full_name|default:user.username }}{% endblock %}

{% block extra_css %}
<style>
  .profile-container{max-width:900px;margin:50px auto;background:#fff;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.1);padding:30px}
  .profile-header{display:flex;align-items:center;gap:20px;border-bottom:2px solid #eee;padding-bottom:20px;margin-bottom:20px}
  .profile-header img{width:120px;height:120px;border-radius:50%;object-fit:cover;border:3px solid #3498db}
  .profile-info h3{margin:0;color:#2c3e50}
  .profile-info p{color:#777;margin-bottom:5px}
  .btn-edit{background:#3498db;color:#fff;border:none;border-radius:8px;padding:8px 20px;transition:.3s}
  .btn-edit:hover{background:#2980b9}
</style>
{% endblock %}

{% block content %}
<div class="container profile-container">
  <div class="profile-header">
    {% if student_profile and student_profile.profile_photo %}
      <img src="{{ student_profile.profile_photo.url }}" alt="Profile Picture">
    {% else %}
      <img src="{% static 'images/default-avatar.png' %}" alt="Profile Picture">
    {% endif %}

    <div class="profile-info">
      <h3>{{ user.get_full_name|default:user.username }}</h3>
      <p><i class="fas fa-envelope me-2"></i>{{ user.email|default:"—" }}</p>
      <p><i class="fas fa-graduation-cap me-2"></i>{% if student_profile and student_profile.department %}{{ student_profile.department }}{% else %}Alumni Member{% endif %}</p>
    </div>

    <div class="ms-auto">
      <!-- FIXED HERE (removed pages:) -->
      <a href="{% url 'profile_edit' %}" class="btn btn-edit"><i class="fas fa-edit me-2"></i>Edit Profile</a>
    </div>
  </div>

  <div class="profile-details">
    <h5><i class="fas fa-info-circle me-2"></i>Personal Information</h5>
    <div class="row">
      <div class="col-md-6">
        <p><strong>Full Name:</strong> {{ user.get_full_name|default:"—" }}</p>
        <p><strong>Email:</strong> {{ user.email|default:"—" }}</p>
        <p><strong>Department:</strong> {{ student_profile.department|default:"—" }}</p>
      </div>
      <div class="col-md-6">
        <p><strong>Batch:</strong> {{ student_profile.batch|default:student_profile.year_of_passing|default:"—" }}</p>
        <p><strong>Location:</strong> {{ student_profile.location|default:"—" }}</p>
        <p><strong>Contact:</strong> {{ student_profile.phone|default:"—" }}</p>
      </div>
    </div>

    <hr>

    <h5><i class="fas fa-briefcase me-2"></i>Professional Details</h5>
    <p><strong>Current Company:</strong> {{ student_profile.current_company|default:"—" }}</p>
    <p><strong>Role:</strong> {{ student_profile.role|default:"—" }}</p>
    <p><strong>Experience:</strong> {{ student_profile.experience_years|default:"—" }} {% if student_profile.experience_years %}years{% endif %}</p>
  </div>

  <div class="text-center mt-4">
    <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary"><i class="fas fa-arrow-left me-2"></i>Back to Dashboard</a>
  </div>
</div>
{% endblock %}
